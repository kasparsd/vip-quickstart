#!/usr/bin/env bash

DIR="$( cd "$( dirname "$0" )/.." && pwd )"
cd $DIR

for i in "$@"
do
case $i in
    --domain=*)
        QUICKSTART_DOMAIN=`echo $i | sed 's/[-a-zA-Z0-9]*=//'`
    ;;
    *)
        # unknown option
    ;;
esac
done

QUICKSTART_DOMAIN="${QUICKSTART_DOMAIN:-vip.local}"
export FACTER_quickstart_domain="$QUICKSTART_DOMAIN"

git pull
git submodule update --init --recursive

vagrant up --provision

echo "Done! Visit http://$QUICKSTART_DOMAIN in your browser."
